<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Éditer les Valeurs - La roulette des secrets</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: space-between;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        .container {
            display: flex;
            flex-direction: column;
            width: 60%;
        }
        .form-section, .history-section {
            margin-bottom: 20px;
        }
        label, input, button {
            display: block;
            margin-bottom: 10px;
        }
        .history-section {
            width: 35%;
            max-width: 400px;
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        h2 {
            font-size: 1.5em;
            margin-bottom: 10px;
            color: #444;
        }
        .history-list {
            list-style-type: none;
            padding: 0;
            max-height: 300px;
            overflow-y: auto;
        }
        .history-item {
            padding: 5px;
            border-bottom: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Formulaire de modification de la colonne Indices -->
        <div class="form-section">
            <h2>Modifier la colonne Indices</h2>
            <label for="teamSelect">Sélectionnez l'équipe :</label>
            <select id="teamSelect">
                <option value="teamRed">Équipe Rouge</option>
                <option value="teamGreen">Équipe Vert</option>
                <option value="teamPurple">Équipe Violet</option>
            </select>
            
            <label for="newIndices">Nouvelle valeur d'Indices :</label>
            <input type="number" id="newIndices" placeholder="Entrez une nouvelle valeur d'Indices">

            <button onclick="updateIndices()">Mettre à jour les Indices</button>
        </div>

        <!-- Autres éléments ou formulaires existants (si présents) -->
    </div>

    <!-- Section Historique sur la droite -->
    <div class="history-section">
        <h2>Historique des dernières actions</h2>

        <!-- Historique des 10 dernières données Excel importées -->
        <div>
            <h3>Dernières données Excel importées</h3>
            <ul id="excelHistory" class="history-list">
                <!-- Rempli par JavaScript -->
            </ul>
        </div>

        <!-- Historique des 3 derniers classements par équipe -->
        <div>
            <h3>Derniers classements</h3>
            <ul id="rankingHistory" class="history-list">
                <!-- Rempli par JavaScript -->
            </ul>
        </div>

        <!-- Historique des 10 dernières mises à jour des Indices -->
        <div>
            <h3>Dernières mises à jour des Indices</h3>
            <ul id="indicesUpdateHistory" class="history-list">
                <!-- Rempli par JavaScript -->
            </ul>
        </div>
    </div>

    <script>
        // Charger les historiques depuis localStorage
        window.onload = loadHistories;

        function loadHistories() {
            loadExcelHistory();
            loadRankingHistory();
            loadIndicesUpdateHistory();
        }

        // Historique des 10 dernières données Excel importées
        function loadExcelHistory() {
            const excelHistory = JSON.parse(localStorage.getItem("excelHistory") || "[]");
            const excelList = document.getElementById("excelHistory");
            excelList.innerHTML = ""; // Vider la liste existante

            excelHistory.slice(-10).reverse().forEach(entry => {
                const listItem = document.createElement("li");
                listItem.className = "history-item";
                listItem.textContent = entry;
                excelList.appendChild(listItem);
            });
        }

        // Historique des 3 derniers classements par équipe
        function loadRankingHistory() {
            const rankingHistory = JSON.parse(localStorage.getItem("rankingHistory") || "[]");
            const rankingList = document.getElementById("rankingHistory");
            rankingList.innerHTML = ""; // Vider la liste existante

            rankingHistory.slice(-3).reverse().forEach(entry => {
                const listItem = document.createElement("li");
                listItem.className = "history-item";
                listItem.textContent = entry;
                rankingList.appendChild(listItem);
            });
        }

        // Historique des 10 dernières mises à jour des Indices
        function loadIndicesUpdateHistory() {
            const indicesUpdateHistory = JSON.parse(localStorage.getItem("indicesUpdateHistory") || "[]");
            const indicesList = document.getElementById("indicesUpdateHistory");
            indicesList.innerHTML = ""; // Vider la liste existante

            indicesUpdateHistory.slice(-10).reverse().forEach(entry => {
                const listItem = document.createElement("li");
                listItem.className = "history-item";
                listItem.textContent = entry;
                indicesList.appendChild(listItem);
            });
        }

        // Mise à jour de la colonne Indices
        function updateIndices() {
            const team = document.getElementById("teamSelect").value;
            const newIndicesValue = parseInt(document.getElementById("newIndices").value);

            if (isNaN(newIndicesValue)) {
                alert("Veuillez entrer une valeur valide pour les Indices.");
                return;
            }

            // Sauvegarder la nouvelle valeur dans localStorage
            localStorage.setItem(`indices${team.charAt(0).toUpperCase() + team.slice(1)}`, newIndicesValue);
            
            // Mettre à jour l'historique des mises à jour des Indices
            const indicesUpdateHistory = JSON.parse(localStorage.getItem("indicesUpdateHistory") || "[]");
            indicesUpdateHistory.push(`${team} mis à jour à ${newIndicesValue} Indices`);
            localStorage.setItem("indicesUpdateHistory", JSON.stringify(indicesUpdateHistory));

            alert(`Les Indices pour ${team} ont été mis à jour à ${newIndicesValue}.`);
            loadIndicesUpdateHistory(); // Rafraîchir l'historique
        }
    </script>
</body>
</html>
